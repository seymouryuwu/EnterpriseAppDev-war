<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

	<h:head>
	<h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
	<title>Change Password</title>
</h:head>
<h:body>
	<div class="navbar navbar-inverse">
		<div class="navbar-brand">Change Password</div>
	</div>
	<h:form>
		<f:event listener="#{loginManagedBean.validateChangePassword}" type="postValidate" />

		<h:panelGrid columns="2">
			<h:outputLabel value="Old Password" for="oldpassword"></h:outputLabel>
			<h:inputSecret id="oldpassword" 
				value="#{loginManagedBean.inputOldPassword}" 
				required="true"
				requiredMessage="Please enter old password" 
				maxlength="30">
			</h:inputSecret>
			
			<h:outputLabel value="New Password" for="newpassword"></h:outputLabel>
			<h:inputSecret id="newpassword" 
				value="#{loginManagedBean.inputNewPassword}"
				required="true" 
				requiredMessage="Please enter new password"
				validatorMessage="Password must contain atleast one lowercase character, uppercase character, a digit and it's length must be between 6 and 20 characters">
				<f:validateRegex pattern="((?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20})" />
			</h:inputSecret>
			
			<h:outputLabel value="Confirm Password" for="confirmpassword"></h:outputLabel>
			<h:inputSecret id="confirmpassword"
				value="#{loginManagedBean.inputConfirmPassword}" 
				required="true"
				requiredMessage="Please confirm your password">
			</h:inputSecret>	
		</h:panelGrid>
		<div>
			<h:commandButton action="#{loginManagedBean.changePassword()}" value="Submit"
				class="btn btn-primary"></h:commandButton>
			<h:outputText value=" " /> 
			<h:link id="close" value="Close" outcome="/user/index.xhtml"
				class="btn btn-primary" />
		</div>
	</h:form>
</h:body>
</html>